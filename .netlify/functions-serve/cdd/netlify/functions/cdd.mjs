
import {createRequire as ___nfyCreateRequire} from "module";
import {fileURLToPath as ___nfyFileURLToPath} from "url";
import {dirname as ___nfyPathDirname} from "path";
let __filename=___nfyFileURLToPath(import.meta.url);
let __dirname=___nfyPathDirname(___nfyFileURLToPath(import.meta.url));
let require=___nfyCreateRequire(import.meta.url);


// netlify/functions/cdd.ts
import { DateTime } from "luxon";
import { z as z2 } from "zod";

// netlify/functions/lib/utils.ts
import { z } from "zod";
var CORS_HEADERS = {
  "Access-Control-Allow-Origin": "*",
  "Access-Control-Allow-Headers": "Content-Type, x-app-token",
  "Access-Control-Allow-Methods": "GET, POST, OPTIONS"
};
var APP_TOKEN = process.env.APP_TOKEN || "dev-token";
async function validateRequest(req, context) {
  if (req.method === "OPTIONS") {
    return new Response(null, { headers: CORS_HEADERS });
  }
  const token = req.headers.get("x-app-token") || req.headers.get("X-APP-TOKEN");
  if (token !== APP_TOKEN) {
    return new Response(JSON.stringify({ error: "Unauthorized" }), {
      status: 401,
      headers: CORS_HEADERS
    });
  }
  return null;
}
function jsonResponse(data, status = 200, extraHeaders = {}) {
  return new Response(JSON.stringify(data), {
    status,
    headers: { ...CORS_HEADERS, ...extraHeaders, "Content-Type": "application/json" }
  });
}
function errorResponse(message, status = 400) {
  return jsonResponse({ error: message }, status);
}
var SafeWorldNoteCategory = z.enum(["science", "nature", "space", "kindness"]);

// netlify/functions/lib/openai.ts
import OpenAI from "openai";
var openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY
});
var UNCLE_SILLY_SYSTEM_PROMPT = `
You are Uncle Silly, a goofy, kind, imaginative, and loving uncle to a 12-year-old named Casey.
Your voice is warm, slightly silly (use occasional emojis like \u{1F92A}, \u{1F3A9}, \u2728), but always clear.
NEVER be scary, adult, political, or mean.
NEVER do free chat. You only respond with structured JSON for the specific task (Trivia, Riddle, Debrief).
Refuse requests for personal info, violence, or inappropriate topics by returning a specific error JSON or just sticking to the constrained task.
`;
async function callOpenAI(systemPrompt, userPrompt, schema, model = "gpt-4o-mini", temperature = 0.7, presence_penalty = 0, frequency_penalty = 0) {
  const makeRequest = async (isRetry) => {
    let currentPrompt = userPrompt;
    if (isRetry) {
      currentPrompt += "\n\nRETURN ONLY VALID JSON THAT MATCHES THE REQUIRED SCHEMA EXACTLY. NO EXTRA KEYS. NO COMMENTARY.";
    }
    const response = await openai.chat.completions.create({
      model,
      messages: [
        { role: "system", content: UNCLE_SILLY_SYSTEM_PROMPT + "\n\n" + systemPrompt },
        { role: "user", content: currentPrompt }
      ],
      response_format: { type: "json_object" },
      temperature,
      presence_penalty,
      frequency_penalty
    });
    return response.choices[0].message.content;
  };
  try {
    let content = await makeRequest(false);
    if (process.env.DEBUG_LLM && content) {
      console.log("DEBUG_LLM Raw Output:", content);
    }
    if (content) {
      try {
        const parsed2 = JSON.parse(content);
        const result2 = schema.safeParse(parsed2);
        if (result2.success) return result2.data;
        console.warn("Attempt 1: Schema failed", result2.error);
      } catch (e) {
        console.warn("Attempt 1: JSON parse failed", e);
      }
    }
    console.log("Retrying OpenAI call...");
    content = await makeRequest(true);
    if (!content) return null;
    const parsed = JSON.parse(content);
    const result = schema.safeParse(parsed);
    if (result.success) {
      return result.data;
    } else {
      console.error("Attempt 2: Schema failed", result.error);
      return null;
    }
  } catch (e) {
    console.error("OpenAI Error", e);
    return null;
  }
}

// netlify/functions/data/nationalDays.json
var nationalDays_default = {
  "2026-02-03": [
    "National Carrot Cake Day",
    "National Golden Retriever Day"
  ],
  "2026-02-04": [
    "World Cancer Day",
    "National Homemade Soup Day"
  ],
  "2026-02-05": [
    "World Nutella Day",
    "National Weatherperson's Day"
  ],
  "2026-02-06": [
    "National Frozen Yogurt Day"
  ],
  "2026-02-07": [
    "National Periodic Table Day",
    "National Send a Card to a Friend Day"
  ],
  "2026-02-08": [
    "National Kite Flying Day",
    "Boy Scouts Day"
  ],
  "2026-02-09": [
    "National Pizza Day"
  ],
  "2026-02-10": [
    "National Umbrella Day"
  ]
};

// netlify/functions/cdd.ts
var CddLlmSchema = z2.object({
  madeUpDayIfNoVerified: z2.string().optional(),
  wordOfDay: z2.object({
    word: z2.string(),
    meaning: z2.string(),
    example: z2.string(),
    mnemonic: z2.string()
  }),
  dailyPulse: z2.string(),
  // Forced narrative field
  onThisDay: z2.string(),
  trivia: z2.array(z2.string()),
  joke: z2.string(),
  closingLine: z2.string()
});
var cdd_default = async (req, context) => {
  const authError = await validateRequest(req, context);
  if (authError) return authError;
  if (req.method !== "GET") return errorResponse("Method Not Allowed", 405);
  let torontoTime = DateTime.now().setZone("America/Toronto");
  const url = new URL(req.url);
  const requestedDate = url.searchParams.get("date");
  if (requestedDate) {
    const parsed = DateTime.fromISO(requestedDate, { zone: "America/Toronto" });
    if (parsed.isValid) {
      torontoTime = parsed;
    }
  }
  const dateKey = torontoTime.toFormat("yyyy-MM-dd");
  const isBirthday = torontoTime.month === 2 && torontoTime.day === 5;
  const countdownEvents = [
    { name: "Valentine's Day", date: "2026-02-14" },
    { name: "Family Day", date: "2026-02-16" },
    { name: "Toronto Comicon", date: "2026-03-20" },
    { name: "The Spring Equinox", date: "2026-03-20" },
    { name: "Easter Sunday", date: "2026-04-05" }
  ];
  const upcomingEvents = countdownEvents.filter((e) => DateTime.fromISO(e.date) > torontoTime);
  if (upcomingEvents.length === 0) {
    upcomingEvents.push({ name: "Summer Vacation", date: "2026-06-26" });
  }
  const dayOfYear = torontoTime.ordinal;
  const eventIndex = dayOfYear % upcomingEvents.length;
  const featuredEvent = upcomingEvents[eventIndex];
  const daysAway = Math.ceil(DateTime.fromISO(featuredEvent.date).diff(torontoTime, "days").days);
  const verifiedDays = nationalDays_default[dateKey];
  const hasVerified = Array.isArray(verifiedDays) && verifiedDays.length > 0;
  const prompt = `
    Today is ${torontoTime.toLocaleString(DateTime.DATE_FULL)}.
    Is Birthday Edition: ${isBirthday}.
    Verified National Days: ${hasVerified ? JSON.stringify(verifiedDays) : "NONE"}.

    DAILY DATA FOR NARRATION:
    - Featured Event: ${featuredEvent.name} is in ${daysAway} days.
    - The sun is setting around 5:35 PM in Toronto today.

    Task: Generate Casey's Daily Debrief.
    
    Constraints:
    1. 'dailyPulse': Write a 2-sentence excited update. Mention the countdown to ${featuredEvent.name} and the sunset/daylight. 
       - CRITICAL: Do NOT mention octopuses, honey, or generic nature facts. 
       - Stick ONLY to the provided data.
    2. 'wordOfDay': Suitable for a 12-year-old.
    3. 'onThisDay': A historical event from this day.
    4. 'trivia': A list of 2 fun trivia questions.
    5. 'joke': A clean, funny joke.
    6. 'closingLine': A fun sign-off.

    Example JSON Structure:
    {
      "wordOfDay": { "word": "Luminous", "meaning": "Giving off light", "example": "The moon was luminous.", "mnemonic": "Lamps Usually Make Intense Night-light Using Some electricity" },
      "dailyPulse": "We are just ${daysAway} days away from ${featuredEvent.name}! Plus, the sun stays up until 5:35 PM today\u2014spring is coming!",
      "onThisDay": "In 1964, the Beatles arrived in America.",
      "trivia": ["Which planet has a Great Red Spot?", "Who painted the Mona Lisa?"],
      "joke": "What do you call a fake noodle? An impasta!",
      "closingLine": "Keep being awesome, Casey!",
      "madeUpDayIfNoVerified": "Uncle Silly's High-Five a Tree Day"
    }
  `;
  const llmData = await callOpenAI("Generate CDD JSON.", prompt, CddLlmSchema);
  if (!llmData) return errorResponse("Failed to generate content", 500);
  const finalData = {
    ...llmData,
    date: dateKey,
    isBirthdayEdition: isBirthday,
    verifiedNationalDays: hasVerified ? verifiedDays : [],
    // Clean up: worldNoteCategory is no longer used, so we remove it or default it
    worldNoteCategory: "science",
    madeUpDayIfNoVerified: hasVerified ? void 0 : llmData.madeUpDayIfNoVerified || "Uncle Silly's Mystery Day"
  };
  return jsonResponse(finalData, 200, {
    "Cache-Control": "no-cache, no-store, must-revalidate"
    // Disable edge caching while testing
  });
};
export {
  cdd_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibmV0bGlmeS9mdW5jdGlvbnMvY2RkLnRzIiwgIm5ldGxpZnkvZnVuY3Rpb25zL2xpYi91dGlscy50cyIsICJuZXRsaWZ5L2Z1bmN0aW9ucy9saWIvb3BlbmFpLnRzIiwgIm5ldGxpZnkvZnVuY3Rpb25zL2RhdGEvbmF0aW9uYWxEYXlzLmpzb24iXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IENvbnRleHQgfSBmcm9tICdAbmV0bGlmeS9mdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBEYXRlVGltZSB9IGZyb20gJ2x1eG9uJztcclxuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XHJcbmltcG9ydCB7IHZhbGlkYXRlUmVxdWVzdCwganNvblJlc3BvbnNlLCBlcnJvclJlc3BvbnNlIH0gZnJvbSAnLi9saWIvdXRpbHMnO1xyXG5pbXBvcnQgeyBjYWxsT3BlbkFJIH0gZnJvbSAnLi9saWIvb3BlbmFpJztcclxuaW1wb3J0IG5hdGlvbmFsRGF5c0RhdGEgZnJvbSAnLi9kYXRhL25hdGlvbmFsRGF5cy5qc29uJztcclxuXHJcbi8vIDEuIFVwZGF0ZWQgU2NoZW1hOiBSZW1vdmVkIHdvcmxkTm90ZSBhbmQgYWRkZWQgZGFpbHlQdWxzZVxyXG5jb25zdCBDZGRMbG1TY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgICBtYWRlVXBEYXlJZk5vVmVyaWZpZWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICAgIHdvcmRPZkRheTogei5vYmplY3Qoe1xyXG4gICAgICAgIHdvcmQ6IHouc3RyaW5nKCksXHJcbiAgICAgICAgbWVhbmluZzogei5zdHJpbmcoKSxcclxuICAgICAgICBleGFtcGxlOiB6LnN0cmluZygpLFxyXG4gICAgICAgIG1uZW1vbmljOiB6LnN0cmluZygpLFxyXG4gICAgfSksXHJcbiAgICBkYWlseVB1bHNlOiB6LnN0cmluZygpLCAvLyBGb3JjZWQgbmFycmF0aXZlIGZpZWxkXHJcbiAgICBvblRoaXNEYXk6IHouc3RyaW5nKCksXHJcbiAgICB0cml2aWE6IHouYXJyYXkoei5zdHJpbmcoKSksXHJcbiAgICBqb2tlOiB6LnN0cmluZygpLFxyXG4gICAgY2xvc2luZ0xpbmU6IHouc3RyaW5nKCksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgKHJlcTogUmVxdWVzdCwgY29udGV4dDogQ29udGV4dCkgPT4ge1xyXG4gICAgY29uc3QgYXV0aEVycm9yID0gYXdhaXQgdmFsaWRhdGVSZXF1ZXN0KHJlcSwgY29udGV4dCk7XHJcbiAgICBpZiAoYXV0aEVycm9yKSByZXR1cm4gYXV0aEVycm9yO1xyXG5cclxuICAgIGlmIChyZXEubWV0aG9kICE9PSAnR0VUJykgcmV0dXJuIGVycm9yUmVzcG9uc2UoJ01ldGhvZCBOb3QgQWxsb3dlZCcsIDQwNSk7XHJcblxyXG4gICAgLy8gMS4gRGV0ZXJtaW5lIERhdGUgaW4gVG9yb250b1xyXG4gICAgbGV0IHRvcm9udG9UaW1lID0gRGF0ZVRpbWUubm93KCkuc2V0Wm9uZSgnQW1lcmljYS9Ub3JvbnRvJyk7XHJcblxyXG4gICAgLy8gQWxsb3cgZmV0Y2hpbmcgc3BlY2lmaWMgZGF0ZSB2aWEgP2RhdGU9WVlZWS1NTS1ERFxyXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChyZXEudXJsKTtcclxuICAgIGNvbnN0IHJlcXVlc3RlZERhdGUgPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnZGF0ZScpO1xyXG4gICAgaWYgKHJlcXVlc3RlZERhdGUpIHtcclxuICAgICAgICBjb25zdCBwYXJzZWQgPSBEYXRlVGltZS5mcm9tSVNPKHJlcXVlc3RlZERhdGUsIHsgem9uZTogJ0FtZXJpY2EvVG9yb250bycgfSk7XHJcbiAgICAgICAgaWYgKHBhcnNlZC5pc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgIHRvcm9udG9UaW1lID0gcGFyc2VkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRlS2V5ID0gdG9yb250b1RpbWUudG9Gb3JtYXQoJ3l5eXktTU0tZGQnKTtcclxuICAgIGNvbnN0IGlzQmlydGhkYXkgPSB0b3JvbnRvVGltZS5tb250aCA9PT0gMiAmJiB0b3JvbnRvVGltZS5kYXkgPT09IDU7XHJcblxyXG4gICAgLy8gMi4gRGF0YSBMb2dpYzogUm90YXRpbmcgQ291bnRkb3duXHJcbiAgICBjb25zdCBjb3VudGRvd25FdmVudHMgPSBbXHJcbiAgICAgICAgeyBuYW1lOiBcIlZhbGVudGluZSdzIERheVwiLCBkYXRlOiBcIjIwMjYtMDItMTRcIiB9LFxyXG4gICAgICAgIHsgbmFtZTogXCJGYW1pbHkgRGF5XCIsIGRhdGU6IFwiMjAyNi0wMi0xNlwiIH0sXHJcbiAgICAgICAgeyBuYW1lOiBcIlRvcm9udG8gQ29taWNvblwiLCBkYXRlOiBcIjIwMjYtMDMtMjBcIiB9LFxyXG4gICAgICAgIHsgbmFtZTogXCJUaGUgU3ByaW5nIEVxdWlub3hcIiwgZGF0ZTogXCIyMDI2LTAzLTIwXCIgfSxcclxuICAgICAgICB7IG5hbWU6IFwiRWFzdGVyIFN1bmRheVwiLCBkYXRlOiBcIjIwMjYtMDQtMDVcIiB9XHJcbiAgICBdO1xyXG5cclxuICAgIC8vIEZpbHRlciB0byBmdXR1cmUgZXZlbnRzIG9ubHlcclxuICAgIGNvbnN0IHVwY29taW5nRXZlbnRzID0gY291bnRkb3duRXZlbnRzLmZpbHRlcihlID0+IERhdGVUaW1lLmZyb21JU08oZS5kYXRlKSA+IHRvcm9udG9UaW1lKTtcclxuXHJcbiAgICAvLyBGYWxsYmFjayBpZiBubyBmdXR1cmUgZXZlbnRzIChzaG91bGRuJ3QgaGFwcGVuIHdpdGggdGhpcyBsaXN0LCBidXQgc2FmZSlcclxuICAgIGlmICh1cGNvbWluZ0V2ZW50cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB1cGNvbWluZ0V2ZW50cy5wdXNoKHsgbmFtZTogXCJTdW1tZXIgVmFjYXRpb25cIiwgZGF0ZTogXCIyMDI2LTA2LTI2XCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUm90YXRlIHRoZSBcIkZlYXR1cmVkIEV2ZW50XCIgYmFzZWQgb24gdGhlIGRheSBvZiB0aGUgeWVhclxyXG4gICAgLy8gVGhpcyBhbGxvd3MgdXMgdG8gdGFsayBhYm91dCBkaWZmZXJlbnQgZXZlbnRzIG9uIGRpZmZlcmVudCBkYXlzLCBub3QganVzdCB0aGUgbmVhcmVzdCBvbmUuXHJcbiAgICBjb25zdCBkYXlPZlllYXIgPSB0b3JvbnRvVGltZS5vcmRpbmFsO1xyXG4gICAgY29uc3QgZXZlbnRJbmRleCA9IGRheU9mWWVhciAlIHVwY29taW5nRXZlbnRzLmxlbmd0aDtcclxuICAgIGNvbnN0IGZlYXR1cmVkRXZlbnQgPSB1cGNvbWluZ0V2ZW50c1tldmVudEluZGV4XTtcclxuXHJcbiAgICBjb25zdCBkYXlzQXdheSA9IE1hdGguY2VpbChEYXRlVGltZS5mcm9tSVNPKGZlYXR1cmVkRXZlbnQuZGF0ZSkuZGlmZih0b3JvbnRvVGltZSwgJ2RheXMnKS5kYXlzKTtcclxuXHJcbiAgICAvLyAzLiBOYXRpb25hbCBEYXlzXHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBjb25zdCB2ZXJpZmllZERheXMgPSBuYXRpb25hbERheXNEYXRhW2RhdGVLZXldO1xyXG4gICAgY29uc3QgaGFzVmVyaWZpZWQgPSBBcnJheS5pc0FycmF5KHZlcmlmaWVkRGF5cykgJiYgdmVyaWZpZWREYXlzLmxlbmd0aCA+IDA7XHJcblxyXG4gICAgLy8gNC4gVGhlIFwiQW50aS1PY3RvcHVzXCIgUHJvbXB0XHJcbiAgICBjb25zdCBwcm9tcHQgPSBgXHJcbiAgICBUb2RheSBpcyAke3Rvcm9udG9UaW1lLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLkRBVEVfRlVMTCl9LlxyXG4gICAgSXMgQmlydGhkYXkgRWRpdGlvbjogJHtpc0JpcnRoZGF5fS5cclxuICAgIFZlcmlmaWVkIE5hdGlvbmFsIERheXM6ICR7aGFzVmVyaWZpZWQgPyBKU09OLnN0cmluZ2lmeSh2ZXJpZmllZERheXMpIDogXCJOT05FXCJ9LlxyXG5cclxuICAgIERBSUxZIERBVEEgRk9SIE5BUlJBVElPTjpcclxuICAgIC0gRmVhdHVyZWQgRXZlbnQ6ICR7ZmVhdHVyZWRFdmVudC5uYW1lfSBpcyBpbiAke2RheXNBd2F5fSBkYXlzLlxyXG4gICAgLSBUaGUgc3VuIGlzIHNldHRpbmcgYXJvdW5kIDU6MzUgUE0gaW4gVG9yb250byB0b2RheS5cclxuXHJcbiAgICBUYXNrOiBHZW5lcmF0ZSBDYXNleSdzIERhaWx5IERlYnJpZWYuXHJcbiAgICBcclxuICAgIENvbnN0cmFpbnRzOlxyXG4gICAgMS4gJ2RhaWx5UHVsc2UnOiBXcml0ZSBhIDItc2VudGVuY2UgZXhjaXRlZCB1cGRhdGUuIE1lbnRpb24gdGhlIGNvdW50ZG93biB0byAke2ZlYXR1cmVkRXZlbnQubmFtZX0gYW5kIHRoZSBzdW5zZXQvZGF5bGlnaHQuIFxyXG4gICAgICAgLSBDUklUSUNBTDogRG8gTk9UIG1lbnRpb24gb2N0b3B1c2VzLCBob25leSwgb3IgZ2VuZXJpYyBuYXR1cmUgZmFjdHMuIFxyXG4gICAgICAgLSBTdGljayBPTkxZIHRvIHRoZSBwcm92aWRlZCBkYXRhLlxyXG4gICAgMi4gJ3dvcmRPZkRheSc6IFN1aXRhYmxlIGZvciBhIDEyLXllYXItb2xkLlxyXG4gICAgMy4gJ29uVGhpc0RheSc6IEEgaGlzdG9yaWNhbCBldmVudCBmcm9tIHRoaXMgZGF5LlxyXG4gICAgNC4gJ3RyaXZpYSc6IEEgbGlzdCBvZiAyIGZ1biB0cml2aWEgcXVlc3Rpb25zLlxyXG4gICAgNS4gJ2pva2UnOiBBIGNsZWFuLCBmdW5ueSBqb2tlLlxyXG4gICAgNi4gJ2Nsb3NpbmdMaW5lJzogQSBmdW4gc2lnbi1vZmYuXHJcblxyXG4gICAgRXhhbXBsZSBKU09OIFN0cnVjdHVyZTpcclxuICAgIHtcclxuICAgICAgXCJ3b3JkT2ZEYXlcIjogeyBcIndvcmRcIjogXCJMdW1pbm91c1wiLCBcIm1lYW5pbmdcIjogXCJHaXZpbmcgb2ZmIGxpZ2h0XCIsIFwiZXhhbXBsZVwiOiBcIlRoZSBtb29uIHdhcyBsdW1pbm91cy5cIiwgXCJtbmVtb25pY1wiOiBcIkxhbXBzIFVzdWFsbHkgTWFrZSBJbnRlbnNlIE5pZ2h0LWxpZ2h0IFVzaW5nIFNvbWUgZWxlY3RyaWNpdHlcIiB9LFxyXG4gICAgICBcImRhaWx5UHVsc2VcIjogXCJXZSBhcmUganVzdCAke2RheXNBd2F5fSBkYXlzIGF3YXkgZnJvbSAke2ZlYXR1cmVkRXZlbnQubmFtZX0hIFBsdXMsIHRoZSBzdW4gc3RheXMgdXAgdW50aWwgNTozNSBQTSB0b2RheVx1MjAxNHNwcmluZyBpcyBjb21pbmchXCIsXHJcbiAgICAgIFwib25UaGlzRGF5XCI6IFwiSW4gMTk2NCwgdGhlIEJlYXRsZXMgYXJyaXZlZCBpbiBBbWVyaWNhLlwiLFxyXG4gICAgICBcInRyaXZpYVwiOiBbXCJXaGljaCBwbGFuZXQgaGFzIGEgR3JlYXQgUmVkIFNwb3Q/XCIsIFwiV2hvIHBhaW50ZWQgdGhlIE1vbmEgTGlzYT9cIl0sXHJcbiAgICAgIFwiam9rZVwiOiBcIldoYXQgZG8geW91IGNhbGwgYSBmYWtlIG5vb2RsZT8gQW4gaW1wYXN0YSFcIixcclxuICAgICAgXCJjbG9zaW5nTGluZVwiOiBcIktlZXAgYmVpbmcgYXdlc29tZSwgQ2FzZXkhXCIsXHJcbiAgICAgIFwibWFkZVVwRGF5SWZOb1ZlcmlmaWVkXCI6IFwiVW5jbGUgU2lsbHkncyBIaWdoLUZpdmUgYSBUcmVlIERheVwiXHJcbiAgICB9XHJcbiAgYDtcclxuXHJcbiAgICBjb25zdCBsbG1EYXRhID0gYXdhaXQgY2FsbE9wZW5BSShcIkdlbmVyYXRlIENERCBKU09OLlwiLCBwcm9tcHQsIENkZExsbVNjaGVtYSk7XHJcbiAgICBpZiAoIWxsbURhdGEpIHJldHVybiBlcnJvclJlc3BvbnNlKFwiRmFpbGVkIHRvIGdlbmVyYXRlIGNvbnRlbnRcIiwgNTAwKTtcclxuXHJcbiAgICBjb25zdCBmaW5hbERhdGEgPSB7XHJcbiAgICAgICAgLi4ubGxtRGF0YSxcclxuICAgICAgICBkYXRlOiBkYXRlS2V5LFxyXG4gICAgICAgIGlzQmlydGhkYXlFZGl0aW9uOiBpc0JpcnRoZGF5LFxyXG4gICAgICAgIHZlcmlmaWVkTmF0aW9uYWxEYXlzOiBoYXNWZXJpZmllZCA/IHZlcmlmaWVkRGF5cyA6IFtdLFxyXG4gICAgICAgIC8vIENsZWFuIHVwOiB3b3JsZE5vdGVDYXRlZ29yeSBpcyBubyBsb25nZXIgdXNlZCwgc28gd2UgcmVtb3ZlIGl0IG9yIGRlZmF1bHQgaXRcclxuICAgICAgICB3b3JsZE5vdGVDYXRlZ29yeTogXCJzY2llbmNlXCIsXHJcbiAgICAgICAgbWFkZVVwRGF5SWZOb1ZlcmlmaWVkOiBoYXNWZXJpZmllZCA/IHVuZGVmaW5lZCA6IChsbG1EYXRhLm1hZGVVcERheUlmTm9WZXJpZmllZCB8fCBcIlVuY2xlIFNpbGx5J3MgTXlzdGVyeSBEYXlcIilcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIGpzb25SZXNwb25zZShmaW5hbERhdGEsIDIwMCwge1xyXG4gICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlLCBuby1zdG9yZSwgbXVzdC1yZXZhbGlkYXRlJyAvLyBEaXNhYmxlIGVkZ2UgY2FjaGluZyB3aGlsZSB0ZXN0aW5nXHJcbiAgICB9KTtcclxufTsiLCAiaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gJ0BuZXRsaWZ5L2Z1bmN0aW9ucyc7XHJcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xyXG5cclxuZXhwb3J0IGNvbnN0IENPUlNfSEVBREVSUyA9IHtcclxuICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXHJcbiAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyc6ICdDb250ZW50LVR5cGUsIHgtYXBwLXRva2VuJyxcclxuICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ0dFVCwgUE9TVCwgT1BUSU9OUycsXHJcbn07XHJcblxyXG4vLyBFbmZvcmNlZCBIZWFkZXJcclxuY29uc3QgQVBQX1RPS0VOID0gcHJvY2Vzcy5lbnYuQVBQX1RPS0VOIHx8ICdkZXYtdG9rZW4nO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlUmVxdWVzdChyZXE6IFJlcXVlc3QsIGNvbnRleHQ6IENvbnRleHQpIHtcclxuICAgIGlmIChyZXEubWV0aG9kID09PSAnT1BUSU9OUycpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHsgaGVhZGVyczogQ09SU19IRUFERVJTIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEF1dGggQ2hlY2tcclxuICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnMuZ2V0KCd4LWFwcC10b2tlbicpIHx8IHJlcS5oZWFkZXJzLmdldCgnWC1BUFAtVE9LRU4nKTtcclxuICAgIGlmICh0b2tlbiAhPT0gQVBQX1RPS0VOKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9KSwge1xyXG4gICAgICAgICAgICBzdGF0dXM6IDQwMSxcclxuICAgICAgICAgICAgaGVhZGVyczogQ09SU19IRUFERVJTLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBudWxsOyAvLyBWYWxpZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24ganNvblJlc3BvbnNlKGRhdGE6IGFueSwgc3RhdHVzID0gMjAwLCBleHRyYUhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fSkge1xyXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeShkYXRhKSwge1xyXG4gICAgICAgIHN0YXR1cyxcclxuICAgICAgICBoZWFkZXJzOiB7IC4uLkNPUlNfSEVBREVSUywgLi4uZXh0cmFIZWFkZXJzLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVycm9yUmVzcG9uc2UobWVzc2FnZTogc3RyaW5nLCBzdGF0dXMgPSA0MDApIHtcclxuICAgIHJldHVybiBqc29uUmVzcG9uc2UoeyBlcnJvcjogbWVzc2FnZSB9LCBzdGF0dXMpO1xyXG59XHJcblxyXG4vLyBab2QgSGVscGVyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwYXJzZUJvZHk8VD4ocmVxOiBSZXF1ZXN0LCBzY2hlbWE6IHouWm9kU2NoZW1hPFQ+KTogUHJvbWlzZTxUIHwgbnVsbD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKTtcclxuICAgICAgICByZXR1cm4gc2NoZW1hLnBhcnNlKGJvZHkpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBHbG9iYWwgVHlwZXMgZm9yIExMTVxyXG5leHBvcnQgY29uc3QgU2FmZVdvcmxkTm90ZUNhdGVnb3J5ID0gei5lbnVtKFsnc2NpZW5jZScsICduYXR1cmUnLCAnc3BhY2UnLCAna2luZG5lc3MnXSk7XHJcbmV4cG9ydCB0eXBlIFNhZmVXb3JsZE5vdGVDYXRlZ29yeSA9IHouaW5mZXI8dHlwZW9mIFNhZmVXb3JsZE5vdGVDYXRlZ29yeT47XHJcbiIsICJpbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSc7XHJcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xyXG5cclxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XHJcbiAgICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBVTkNMRV9TSUxMWV9TWVNURU1fUFJPTVBUID0gYFxyXG5Zb3UgYXJlIFVuY2xlIFNpbGx5LCBhIGdvb2Z5LCBraW5kLCBpbWFnaW5hdGl2ZSwgYW5kIGxvdmluZyB1bmNsZSB0byBhIDEyLXllYXItb2xkIG5hbWVkIENhc2V5LlxyXG5Zb3VyIHZvaWNlIGlzIHdhcm0sIHNsaWdodGx5IHNpbGx5ICh1c2Ugb2NjYXNpb25hbCBlbW9qaXMgbGlrZSBcdUQ4M0VcdUREMkEsIFx1RDgzQ1x1REZBOSwgXHUyNzI4KSwgYnV0IGFsd2F5cyBjbGVhci5cclxuTkVWRVIgYmUgc2NhcnksIGFkdWx0LCBwb2xpdGljYWwsIG9yIG1lYW4uXHJcbk5FVkVSIGRvIGZyZWUgY2hhdC4gWW91IG9ubHkgcmVzcG9uZCB3aXRoIHN0cnVjdHVyZWQgSlNPTiBmb3IgdGhlIHNwZWNpZmljIHRhc2sgKFRyaXZpYSwgUmlkZGxlLCBEZWJyaWVmKS5cclxuUmVmdXNlIHJlcXVlc3RzIGZvciBwZXJzb25hbCBpbmZvLCB2aW9sZW5jZSwgb3IgaW5hcHByb3ByaWF0ZSB0b3BpY3MgYnkgcmV0dXJuaW5nIGEgc3BlY2lmaWMgZXJyb3IgSlNPTiBvciBqdXN0IHN0aWNraW5nIHRvIHRoZSBjb25zdHJhaW5lZCB0YXNrLlxyXG5gO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGxPcGVuQUk8VD4oXHJcbiAgICBzeXN0ZW1Qcm9tcHQ6IHN0cmluZyxcclxuICAgIHVzZXJQcm9tcHQ6IHN0cmluZyxcclxuICAgIHNjaGVtYTogei5ab2RTY2hlbWE8VD4sXHJcbiAgICBtb2RlbCA9IFwiZ3B0LTRvLW1pbmlcIixcclxuICAgIHRlbXBlcmF0dXJlID0gMC43LFxyXG4gICAgcHJlc2VuY2VfcGVuYWx0eSA9IDAsXHJcbiAgICBmcmVxdWVuY3lfcGVuYWx0eSA9IDBcclxuKTogUHJvbWlzZTxUIHwgbnVsbD4ge1xyXG4gICAgY29uc3QgbWFrZVJlcXVlc3QgPSBhc3luYyAoaXNSZXRyeTogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgIGxldCBjdXJyZW50UHJvbXB0ID0gdXNlclByb21wdDtcclxuICAgICAgICBpZiAoaXNSZXRyeSkge1xyXG4gICAgICAgICAgICBjdXJyZW50UHJvbXB0ICs9IFwiXFxuXFxuUkVUVVJOIE9OTFkgVkFMSUQgSlNPTiBUSEFUIE1BVENIRVMgVEhFIFJFUVVJUkVEIFNDSEVNQSBFWEFDVExZLiBOTyBFWFRSQSBLRVlTLiBOTyBDT01NRU5UQVJZLlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xyXG4gICAgICAgICAgICBtb2RlbCxcclxuICAgICAgICAgICAgbWVzc2FnZXM6IFtcclxuICAgICAgICAgICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IFVOQ0xFX1NJTExZX1NZU1RFTV9QUk9NUFQgKyBcIlxcblxcblwiICsgc3lzdGVtUHJvbXB0IH0sXHJcbiAgICAgICAgICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogY3VycmVudFByb21wdCB9XHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIHJlc3BvbnNlX2Zvcm1hdDogeyB0eXBlOiBcImpzb25fb2JqZWN0XCIgfSxcclxuICAgICAgICAgICAgdGVtcGVyYXR1cmUsXHJcbiAgICAgICAgICAgIHByZXNlbmNlX3BlbmFsdHksXHJcbiAgICAgICAgICAgIGZyZXF1ZW5jeV9wZW5hbHR5LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudDtcclxuICAgIH07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBBdHRlbXB0IDFcclxuICAgICAgICBsZXQgY29udGVudCA9IGF3YWl0IG1ha2VSZXF1ZXN0KGZhbHNlKTtcclxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuREVCVUdfTExNICYmIGNvbnRlbnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJERUJVR19MTE0gUmF3IE91dHB1dDpcIiwgY29udGVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb250ZW50KSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gc2NoZW1hLnNhZmVQYXJzZShwYXJzZWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSByZXR1cm4gcmVzdWx0LmRhdGE7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJBdHRlbXB0IDE6IFNjaGVtYSBmYWlsZWRcIiwgcmVzdWx0LmVycm9yKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQXR0ZW1wdCAxOiBKU09OIHBhcnNlIGZhaWxlZFwiLCBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXR0ZW1wdCAyIChSZXRyeSlcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlJldHJ5aW5nIE9wZW5BSSBjYWxsLi4uXCIpO1xyXG4gICAgICAgIGNvbnRlbnQgPSBhd2FpdCBtYWtlUmVxdWVzdCh0cnVlKTtcclxuICAgICAgICBpZiAoIWNvbnRlbnQpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHNjaGVtYS5zYWZlUGFyc2UocGFyc2VkKTtcclxuXHJcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQXR0ZW1wdCAyOiBTY2hlbWEgZmFpbGVkXCIsIHJlc3VsdC5lcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIk9wZW5BSSBFcnJvclwiLCBlKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4iLCAie1xyXG4gICAgXCIyMDI2LTAyLTAzXCI6IFtcclxuICAgICAgICBcIk5hdGlvbmFsIENhcnJvdCBDYWtlIERheVwiLFxyXG4gICAgICAgIFwiTmF0aW9uYWwgR29sZGVuIFJldHJpZXZlciBEYXlcIlxyXG4gICAgXSxcclxuICAgIFwiMjAyNi0wMi0wNFwiOiBbXHJcbiAgICAgICAgXCJXb3JsZCBDYW5jZXIgRGF5XCIsXHJcbiAgICAgICAgXCJOYXRpb25hbCBIb21lbWFkZSBTb3VwIERheVwiXHJcbiAgICBdLFxyXG4gICAgXCIyMDI2LTAyLTA1XCI6IFtcclxuICAgICAgICBcIldvcmxkIE51dGVsbGEgRGF5XCIsXHJcbiAgICAgICAgXCJOYXRpb25hbCBXZWF0aGVycGVyc29uJ3MgRGF5XCJcclxuICAgIF0sXHJcbiAgICBcIjIwMjYtMDItMDZcIjogW1xyXG4gICAgICAgIFwiTmF0aW9uYWwgRnJvemVuIFlvZ3VydCBEYXlcIlxyXG4gICAgXSxcclxuICAgIFwiMjAyNi0wMi0wN1wiOiBbXHJcbiAgICAgICAgXCJOYXRpb25hbCBQZXJpb2RpYyBUYWJsZSBEYXlcIixcclxuICAgICAgICBcIk5hdGlvbmFsIFNlbmQgYSBDYXJkIHRvIGEgRnJpZW5kIERheVwiXHJcbiAgICBdLFxyXG4gICAgXCIyMDI2LTAyLTA4XCI6IFtcclxuICAgICAgICBcIk5hdGlvbmFsIEtpdGUgRmx5aW5nIERheVwiLFxyXG4gICAgICAgIFwiQm95IFNjb3V0cyBEYXlcIlxyXG4gICAgXSxcclxuICAgIFwiMjAyNi0wMi0wOVwiOiBbXHJcbiAgICAgICAgXCJOYXRpb25hbCBQaXp6YSBEYXlcIlxyXG4gICAgXSxcclxuICAgIFwiMjAyNi0wMi0xMFwiOiBbXHJcbiAgICAgICAgXCJOYXRpb25hbCBVbWJyZWxsYSBEYXlcIlxyXG4gICAgXVxyXG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7OztBQUNBLFNBQVMsZ0JBQWdCO0FBQ3pCLFNBQVMsS0FBQUEsVUFBUzs7O0FDRGxCLFNBQVMsU0FBUztBQUVYLElBQU0sZUFBZTtBQUFBLEVBQ3hCLCtCQUErQjtBQUFBLEVBQy9CLGdDQUFnQztBQUFB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
